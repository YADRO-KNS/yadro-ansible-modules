---
- name: Read information about BMC firmware (check mode)
  yadro.obmc.bmc_firmware_info:
    connection:
      hostname: "http://172.17.133.188"
      port: 8080
      username: "admin"
      password: "ChangeMe"
      validate_certs: false
  register: result
  check_mode: True
  delegate_to: localhost

- name: Check firmware_info returned and state doesn't changed (check mode)
  assert:
    that:
      - "result.changed == false"
      - "result.firmware_info != None"
      - "result.msg == 'Firmware information successfully read.'"

- name: Read information about BMC firmware
  yadro.obmc.bmc_firmware_info:
    connection:
      hostname: "http://172.17.133.188"
      port: 8080
      username: "admin"
      password: "ChangeMe"
      validate_certs: false
  register: result
  delegate_to: localhost

- name: Check firmware_info returned and state doesn't changed
  assert:
    that:
      - "result.changed == false"
      - "result.firmware_info != None"
      - "result.msg == 'Firmware information successfully read.'"
